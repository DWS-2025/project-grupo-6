<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="/src/main/resources/static/css/product_template.css"> 

    <script src="/src/main/resources/static/js/Order.js"></script>
    <script src="/src/main/resources/static/js/Product.js"></script>
    <script src="/src/main/resources/static/js/Review.js"></script>
    <script src="/src/main/resources/static/js/User.js"></script>
    
</head>

<body class="bg-gray-100 p-6">
    <header class="bg-blue-800 p-4 text-white flex justify-between items-center">
        <img src="/src/main/resources/static/Images/Logos/logotipo.png" alt="Logo de la tienda" width="200">
        <input type="text" id="searchBar" placeholder="Search products..." class="p-2 rounded text-black w-1/3">
        <nav>
            <a href="/src/main/resources/templates/start_template.html" class="mx-2">Start</a>
            <a href="#" class="mx-2" onclick="toggleCart()">Cart</a>
            <a href="/src/main/resources/templates/profile_template.html" class="mx-2">Profile</a>
        </nav>
    </header>
    <div class="container mx-auto bg-white p-8 rounded-lg shadow-lg">
        <!-- Images Section -->
        <div class="flex flex-col md:flex-row gap-8">
            <!-- Miniatures -->
            <div class="flex flex-col space-y-4">
                <img src="/src/main/resources/static/Images/Movil/Foto1.jpg" alt="Miniature 1" class="thumbnail active" onclick="changeMainImage(this)">
                <img src="/src/main/resources/static/Images/Movil/Foto3.jpg" alt="Miniature 2" class="thumbnail" onclick="changeMainImage(this)">
                <img src="/src/main/resources/static/Images/Movil/Foto4.jpg" alt="Miniature 3" class="thumbnail" onclick="changeMainImage(this)">
                <img src="/src/main/resources/static/Images/Movil/Foto5.jpg" alt="Miniature 4" class="thumbnail" onclick="changeMainImage(this)">
            </div>

            <!-- Main image -->
            <div class="flex-1">
                <img id="mainImage" src="/src/main/resources/static/Images/Movil/Foto2.jpg" alt="Product's Main Image" class="main-image">
            </div>

            <!-- Product Details -->
            <div class="flex-1">
                <h1 class="text-3xl font-bold mb-4 text-blue-800">Xiaomi Redmi Note 14</h1>
                <p class="text-2xl text-blue-600 font-bold mb-4">$199.99</p>

                <!-- Star rating -->
                <div class="flex items-center mb-4">
                    <a href="#rating" class="text-yellow-400 text-2xl">★★★★★</a>
                    <span class="text-gray-600 ml-2">(4.4)</span>
                </div>

                <p class="text-gray-600 mb-4">Smartphone de 6+128GB, Pantalla de 6.67" AMOLED FHD+ 120Hz, MediaTek Helio G99-Ultra, cámara de 108MP, TurboCharge 33W, 5500 mAh, Cargador no Incluido, Negro (Versión ES)</p>

                <!-- Pay button -->
                <button class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                    Add to cart
                </button>
            </div>
        </div>

        <!-- Recommendations -->
        <div class="mt-12 relative">
            <h2 class="text-2xl font-bold mb-6 text-blue-800">Recommended Products</h2>
            <div class="relative">
                <!-- Left scroll -->
                <button class="scroll-button left" onclick="scrollLeft()">&#10094;</button>
                <!-- Product container -->
                <div class="scroll-container" id="recommendedProducts">
                    <!-- Recommended product 1 -->
                    <div class="bg-white p-4 rounded-lg shadow-md flex-shrink-0 w-48">
                        <img src="/src/main/resources/static/Images/baby-londok-calotes-closeup-dry-leaves.jpg" alt="Product 1" class="w-full h-48 object-cover mb-4">
                        <p class="text-lg font-semibold text-blue-800">Phone</p>
                        <p class="text-blue-600 font-bold">$149.99</p>
                    </div>
                    <!-- Recommended product 2 -->
                    <div class="bg-white p-4 rounded-lg shadow-md flex-shrink-0 w-48">
                        <img src="/src/main/resources/static/Images/ImgPrueba.jpg" alt="Product 2" class="w-full h-48 object-cover mb-4">
                        <p class="text-lg font-semibold text-blue-800">Fast Charger</p>
                        <p class="text-blue-600 font-bold">$19.99</p>
                    </div>
                    <!-- Recommended product 3 -->
                    <div class="bg-white p-4 rounded-lg shadow-md flex-shrink-0 w-48">
                        <img src="/src/main/resources/static/Images/little-owl-egg.jpg" alt="Product 3" class="w-full h-48 object-cover mb-4">
                        <p class="text-lg font-semibold text-blue-800">Bluetooth Earphones</p>
                        <p class="text-blue-600 font-bold">$49.99</p>
                    </div>
                    <!-- Recommended product 4 -->
                    <div class="bg-white p-4 rounded-lg shadow-md flex-shrink-0 w-48">
                        <img src="/src/main/resources/static/Images/low-angle-shot-cathedral-ceiling-with-windows-black-white.jpg" alt="Product 4" class="w-full h-48 object-cover mb-4">
                        <p class="text-lg font-semibold text-blue-800">Protective Case</p>
                        <p class="text-blue-600 font-bold">$9.99</p>
                    </div>
                    <!-- More recommended products -->
                    <div class="bg-white p-4 rounded-lg shadow-md flex-shrink-0 w-48">
                        <img src="/src/main/resources/static/Images/view-three-dimensional-animated-cartoon-bird.jpg" alt="Product 5" class="w-full h-48 object-cover mb-4">
                        <p class="text-lg font-semibold text-blue-800">Smartwatch</p>
                        <p class="text-blue-600 font-bold">$99.99</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-md flex-shrink-0 w-48">
                        <img src="/src/main/resources/static/Images/summer-girl-with-retro-camera.jpg" alt="Product 6" class="w-full h-48 object-cover mb-4">
                        <p class="text-lg font-semibold text-blue-800">Tablet</p>
                        <p class="text-blue-600 font-bold">$199.99</p>
                    </div>
                </div>
                <!-- Right scroll -->
                <button class="scroll-button right" onclick="scrollRight()">&#10095;</button>
            </div>
        </div>

        <!-- Rating section -->
        <div id="rating" class="mt-12">
            <h2 class="text-2xl font-bold mb-6 text-blue-800">Rating and Reviews</h2>
            <div class="flex flex-col md:flex-row gap-8">
                <!-- Bar chart -->
                <div class="w-full md:w-1/3">
                    <canvas id="ratingChart"></canvas>
                    <p class="text-center text-gray-600 mt-4">Average rating: <span class="font-bold">4.5</span></p>
                </div>

                <!-- Reviews -->
                <div class="w-full md:w-2/3">
                    <!-- Button to leave a review -->
                    <button onclick="toggleReviewBox()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors mb-6">
                        Leave a review
                    </button>

                    <!-- Review box (initially hidden) -->
                    <div id="reviewBox" class="review-box bg-gray-50 p-6 rounded-lg shadow-md mb-6">
                        <textarea id="reviewText" class="w-full p-4 border rounded-lg mb-4" placeholder="Write your review here..."></textarea>
                        <button onclick="submitReview()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                            Enviar reseña
                        </button>
                    </div>

                    <!-- Review list -->
                    <div id="reviewsList">
                        <!-- Review example -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md mb-4">
                            <p class="text-gray-600">"Excellent product! I totally recommend it."</p>
                            <p class="text-gray-400 text-sm mt-2">- Anonymous User</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Change main image
        function changeMainImage(thumbnail) {
            const mainImage = document.getElementById("mainImage");
            const thumbnails = document.querySelectorAll(".thumbnail");

            // Swap the main image with the clicked thumbnail
            const tempSrc = mainImage.src;
            mainImage.src = thumbnail.src;
            thumbnail.src = tempSrc;

            // Remove the "active" class from all thumbnails
            thumbnails.forEach(t => t.classList.remove("active"));

            // Add the "active" class to the clicked thumbnail
            thumbnail.classList.add("active");
        }

        // Show/hide the review box
        function toggleReviewBox() {
            const reviewBox = document.getElementById("reviewBox");
            reviewBox.style.display = reviewBox.style.display === "none" ? "block" : "none";
        }

        // Send review
        function submitReview() {
            const reviewText = document.getElementById("reviewText").value;
            if (reviewText.trim() === "") {
                alert("Please, write a review.");
                return;
            }

            // Add a review to the list
            const reviewsList = document.getElementById("reviewsList");
            const newReview = document.createElement("div");
            newReview.className = "bg-gray-50 p-6 rounded-lg shadow-md mb-4";
            newReview.innerHTML = `
                <p class="text-gray-600">"${reviewText}"</p>
                <p class="text-gray-400 text-sm mt-2">- Anonymous User</p>
            `;
            reviewsList.prepend(newReview);

            // Clear the text box and hide the form
            document.getElementById("reviewText").value = "";
            toggleReviewBox();
        }

        // Vertical bar chart
        const ctx = document.getElementById('ratingChart').getContext('2d');
        const ratingChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['1 star', '2 stars', '3 starts', '4 starts', '5 starts'],
                datasets: [{
                    label: 'Rating percentage',
                    data: [5, 10, 15, 30, 40], // Example data
                    backgroundColor: 'rgba(59, 130, 246, 0.2)',
                    borderColor: 'rgba(59, 130, 246, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                indexAxis: 'y', // Vertical bars
                scales: {
                    x: {
                        beginAtZero: true,
                        max: 100
                    }
                },
                plugins: {
                    legend: {
                        display: false // Hide legend
                    }
                }
            }
        });

        // Horizontal scroll for recommended products
        const scrollContainer = document.getElementById("recommendedProducts");

        function scrollLeft() {
            scrollContainer.scrollBy({ left: -200, behavior: 'smooth' });
        }

        function scrollRight() {
            scrollContainer.scrollBy({ left: 200, behavior: 'smooth' });
        }
    </script>
</body>

</html>
